{
  "info": {
    "_postman_id": "b239493a-00d3-47ef-91ee-798e903728e1",
    "name": "DnD web-API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "50199064",
    "_collection_link": "https://go.postman.co/collection/50199064-b239493a-00d3-47ef-91ee-798e903728e1?source=collection_link"
  },
  "item": [
    {
      "name": "Characters",
      "item": [
        {
          "name": "Get all characters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/characters",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get character by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/characters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create character",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Sauron\",\r\n    \"charisma\": 18,\r\n    \"constitution\": 20,\r\n    \"dexterity\": 12,\r\n    \"intelligence\": 20,\r\n    \"strength\": 25,\r\n    \"wisdom\": 18,\r\n    \"maxHitPoints\": 10000,\r\n    \"currentHitPoints\": 10000,\r\n    \"experiencePoints\": 1000000,\r\n    \"size\": \"Huge\",\r\n    \"copperPieces\": 0,\r\n    \"silverPieces\": 1000,\r\n    \"electrumPieces\": 500,\r\n    \"goldPieces\": 10000,\r\n    \"platinumPieces\": 5000,\r\n    \"notes\": \"The Dark Lord, master of Mordor and creator of the One Ring.\",\r\n    \"alignmentCode\": \"LE\",\r\n    \"typeId\": 2,\r\n    \"raceId\": 1,\r\n    \"classId\": 3,\r\n    \"inventory\": [\r\n        {\r\n            \"referenceId\": 1,\r\n            \"type\": \"weapon\",\r\n            \"quantity\": 1\r\n        },\r\n        {\r\n            \"referenceId\": 2,\r\n            \"type\": \"weapon\",\r\n            \"quantity\": 10\r\n        },\r\n        {\r\n            \"referenceId\": 1,\r\n            \"type\": \"equipment\",\r\n            \"quantity\": 5\r\n        },\r\n        {\r\n            \"type\": \"custom\",\r\n            \"name\": \"Staff of Shadowfire\",\r\n            \"description\": \"A blackened staff wreathed in eternal dark flames, radiating fear and burning the will of foes.\",\r\n            \"valueInCopperPieces\": 500000,\r\n            \"weightInLbs\": 15,\r\n            \"quantity\": 1\r\n        },\r\n        {\r\n            \"type\": \"custom\",\r\n            \"name\": \"Crown of the Dark Lord\",\r\n            \"description\": \"A spiked iron crown that grants immense authority over armies and instills dread into all who see it.\",\r\n            \"valueInCopperPieces\": 750000,\r\n            \"weightInLbs\": 8,\r\n            \"quantity\": 1\r\n        },\r\n        {\r\n            \"type\": \"custom\",\r\n            \"name\": \"Ring of Power (The One Ring)\",\r\n            \"description\": \"Forged in secret, this ring grants near-immortality and domination over other rings of power. Emits a faint, ominous glow.\",\r\n            \"valueInCopperPieces\": 10000000,\r\n            \"weightInLbs\": 0.5,\r\n            \"quantity\": 1\r\n        },\r\n        {\r\n            \"type\": \"custom\",\r\n            \"name\": \"Armor of Shadowsteel\",\r\n            \"description\": \"Black steel armor infused with dark magic, nearly indestructible and enhances the wearer's strength and presence.\",\r\n            \"valueInCopperPieces\": 600000,\r\n            \"weightInLbs\": 80,\r\n            \"quantity\": 1\r\n        }\r\n    ]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/characters",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update character",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Gandalf the White\",\r\n    \"charisma\": 20,\r\n    \"constitution\": 18,\r\n    \"dexterity\": 14,\r\n    \"intelligence\": 20,\r\n    \"strength\": 14,\r\n    \"wisdom\": 20,\r\n    \"maxHitPoints\": 80,\r\n    \"currentHitPoints\": 80,\r\n    \"experiencePoints\": 12000,\r\n    \"size\": \"Medium\",\r\n    \"copperPieces\": 30,\r\n    \"silverPieces\": 60,\r\n    \"electrumPieces\": 40,\r\n    \"goldPieces\": 250,\r\n    \"platinumPieces\": 10,\r\n    \"notes\": \"Returned more powerful after defeating the Balrog, now leading the fight against Sauron.\",\r\n    \"alignmentCode\": \"LG\",\r\n    \"typeId\": 1,\r\n    \"raceId\": 1,\r\n    \"classId\": 1,\r\n    \"inventory\": [\r\n        {\r\n            \"referenceId\": 1,\r\n            \"type\": \"weapon\",\r\n            \"quantity\": 10\r\n        },\r\n        {\r\n            \"referenceId\": 2,\r\n            \"type\": \"equipment\",\r\n            \"quantity\": 10\r\n        },\r\n        {\r\n            \"type\": \"custom\",\r\n            \"name\": \"Glamdring, Sword of the West\",\r\n            \"description\": \"The ancient sword of the High Elves, glowing with a blue flame whenever orcs are near. Once wielded by Turgon, reforged for Gandalfâ€™s return.\",\r\n            \"valueInCopperPieces\": 500000,\r\n            \"weightInLbs\": 4.5,\r\n            \"quantity\": 1\r\n        }\r\n    ]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/characters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete character",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/characters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Upload character portrait",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "portrait",
                  "type": "file",
                  "uuid": "9ec54528-a8a5-4cca-8a97-670bb0ac3dc4",
                  "src": "postman-cloud:///1f0fdee0-74e4-4860-be93-f201eb089514"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/characters/:id/portrait",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters",
                ":id",
                "portrait"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get character portrait",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/characters/:id/portrait",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "characters",
                ":id",
                "portrait"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Weapons",
      "item": [
        {
          "name": "Get all weapons",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/weapons",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "weapons"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get weapon by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/weapons/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "weapons",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create weapon",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Light Crossbow\",\r\n    \"description\": \"A mechanical ranged weapon that fires bolts with high accuracy and stopping power.\",\r\n    \"valueInCopperPieces\": 2500,\r\n    \"weightInLbs\": 5.0,\r\n    \"damageDice\": \"1d8\",\r\n    \"damageType\": \"piercing\",\r\n    \"rangeNormal\": 80,\r\n    \"rangeLong\": 320,\r\n    \"isTwoHanded\": true\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/weapons",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "weapons"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update weapon",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Longsword +1\",\r\n    \"description\": \"A finely crafted longsword imbued with minor enchantments that enhance its accuracy and lethality.\",\r\n    \"valueInCopperPieces\": 30000,\r\n    \"weightInLbs\": 3.0,\r\n    \"damageDice\": \"1d8\",\r\n    \"damageType\": \"slashing\",\r\n    \"rangeNormal\": null,\r\n    \"rangeLong\": null,\r\n    \"isTwoHanded\": false\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/weapons/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "weapons",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete weapon",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/weapons/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "weapons",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Equipment",
      "item": [
        {
          "name": "Get all equipment",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/equipment",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "equipment"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get equipment by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/equipment/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "equipment",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create equipment",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Crowbar\",\r\n    \"description\": \"A sturdy iron bar used for prying open crates, doors, and other heavy objects.\",\r\n    \"valueInCopperPieces\": 200,\r\n    \"weightInLbs\": 5.0\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/equipment",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "equipment"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update equipment",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"name\": \"Torch\",\r\n    \"description\": \"A wooden torch that burns for about one hour, providing bright light and can be used to ignite flammable objects.\",\r\n    \"valueInCopperPieces\": 10\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/equipment/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "equipment",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete equipment",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/equipment/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "equipment",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Encounters",
      "item": [
        {
          "name": "Join requests",
          "item": [
            {
              "name": "Get all encounter join requests",
              "protocolProfileBehavior": {
                "disableBodyPruning": true
              },
              "request": {
                "method": "GET",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": ""
                },
                "url": {
                  "raw": "{{baseUrl}}/encounters/:encounterId/join-requests",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "encounters",
                    ":encounterId",
                    "join-requests"
                  ],
                  "variable": [
                    {
                      "key": "encounterId",
                      "value": "1"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Create encounter join request",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "const response = pm.response.json();\r",
                      "pm.globals.set(\"createdEncounterJoinRequestId\", response.id);"
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"characterId\": 5,\r\n    \"initiative\": 10\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/encounters/:encounterId/join-requests",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "encounters",
                    ":encounterId",
                    "join-requests"
                  ],
                  "variable": [
                    {
                      "key": "encounterId",
                      "value": "1"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Approve encounter join request",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "PATCH",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"state\": \"approved\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/encounters/:encounterId/join-requests/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "encounters",
                    ":encounterId",
                    "join-requests",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "encounterId",
                      "value": "1"
                    },
                    {
                      "key": "id",
                      "value": "{{createdEncounterJoinRequestId}}"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Decline encounter join request",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "PATCH",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"state\": \"declined\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/encounters/:encounterId/join-requests/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "encounters",
                    ":encounterId",
                    "join-requests",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "encounterId",
                      "value": "1"
                    },
                    {
                      "key": "id",
                      "value": "{{createdEncounterJoinRequestId}}"
                    }
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "Get all encounters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/encounters",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get encounter by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/encounters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create encounter",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"title\": \"Ambush at Amon Hen\",\r\n  \"description\": \"As the Fellowship camps near the ancient ruins of Amon Hen, the air grows tense. Orcs under the command of Saruman emerge from the forest, arrows flying and blades clashing. Boromir fights valiantly to protect the Hobbits, Aragorn and Legolas race through the trees, and chaos erupts as the Fellowship is torn apart.\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/encounters",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Add participant to encounter",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"characterId\": 5,\r\n    \"initiative\": 25\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/:id/participants",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters",
                ":id",
                "participants"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Start encounter",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"action\": \"start\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Advance encounter turn",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"action\": \"advance-turn\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Close encounter",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"action\": \"close\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/encounters/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "encounters",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "auth": {
    "type": "oauth2",
    "oauth2": [
      {
        "key": "useBrowser",
        "value": false,
        "type": "boolean"
      },
      {
        "key": "authRequestParams",
        "value": [
          {
            "key": "prompt",
            "value": "create",
            "enabled": false,
            "send_as": "request_url"
          },
          {
            "key": "prompt",
            "value": "login",
            "enabled": true,
            "send_as": "request_url"
          }
        ],
        "type": "any"
      },
      {
        "key": "client_authentication",
        "value": "body",
        "type": "string"
      },
      {
        "key": "scope",
        "value": "openid profile email",
        "type": "string"
      },
      {
        "key": "clientSecret",
        "value": "{{authClientSecret}}",
        "type": "string"
      },
      {
        "key": "clientId",
        "value": "{{authClientId}}",
        "type": "string"
      },
      {
        "key": "accessTokenUrl",
        "value": "{{authTokenUrl}}",
        "type": "string"
      },
      {
        "key": "authUrl",
        "value": "{{authAuthorizationUrl}}",
        "type": "string"
      },
      {
        "key": "redirect_uri",
        "value": "https://oauth.pstmn.io/v1/callback",
        "type": "string"
      },
      {
        "key": "tokenName",
        "value": "dnd-app-web-api-token",
        "type": "string"
      },
      {
        "key": "addTokenTo",
        "value": "header",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "authClientId",
      "value": "dnd-app-web-api"
    },
    {
      "key": "authClientSecret",
      "value": "YzlNBLr20ObxvNkeflIKeorhnlsq4yCg"
    },
    {
      "key": "authTokenUrl",
      "value": "http://localhost:9090/realms/dnd-app/protocol/openid-connect/token"
    },
    {
      "key": "authAuthorizationUrl",
      "value": "http://localhost:9090/realms/dnd-app/protocol/openid-connect/auth"
    },
    {
      "key": "authAudience",
      "value": "account"
    }
  ]
}